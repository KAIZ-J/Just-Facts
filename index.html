<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Factual â€¢ Curious Facts</title>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <!-- Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ’¡</text></svg>">
    <style>
        :root {
            --primary: #0a0a0a;
            --secondary: #111111;
            --tertiary: #1a1a1a;
            --accent: #ffffff;
            --accent-dim: #888888;
            --card-bg: #0f0f0f;
            --border: rgba(255, 255, 255, 0.08);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--primary);
            color: var(--accent);
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
     /* Beautiful Minimal Custom Cursor */
* {
    cursor: none;
}

.custom-cursor {
    position: fixed;
    top: 0;
    left: 0;
    width: 20px;
    height: 20px;
    pointer-events: none;
    z-index: 9999;
    mix-blend-mode: difference;
}

.cursor-outer {
    position: absolute;
    width: 20px;
    height: 20px;
    border: 1px solid rgba(255, 255, 255, 0.8);
    border-radius: 50%;
    transition: all 0.15s ease-out;
    transform: translate(-50%, -50%);
}

.cursor-inner {
    position: absolute;
    width: 4px;
    height: 4px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    transition: width 0.2s ease, height 0.2s ease;
}

/* Cursor hover states */
.custom-cursor.hover .cursor-outer {
    width: 40px;
    height: 40px;
    border-color: rgba(255, 255, 255, 1);
    background: rgba(255, 255, 255, 0.1);
}

.custom-cursor.hover .cursor-inner {
    width: 6px;
    height: 6px;
    background: rgba(255, 255, 255, 1);
}

.custom-cursor.click .cursor-outer {
    width: 25px;
    height: 25px;
    border-color: rgba(255, 255, 255, 1);
    background: rgba(255, 255, 255, 0.2);
}

/* Beautiful Custom Scrollbar */
body {
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.3) transparent;
}

body::-webkit-scrollbar {
    width: 8px;
}

body::-webkit-scrollbar-track {
    background: transparent;
}

body::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 4px;
    transition: background 0.3s ease;
}

body::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.5);
}

body::-webkit-scrollbar-thumb:active {
    background: rgba(255, 255, 255, 0.7);
}

/* Smooth scrolling */
html {
    scroll-behavior: smooth;
}

/* Hide scrollbar when not scrolling */
body {
    overflow: overlay;
}

body::-webkit-scrollbar-thumb {
    opacity: 0;
    transition: opacity 0.3s ease, background 0.3s ease;
}

body:hover::-webkit-scrollbar-thumb {
    opacity: 1;
}   
        .noise-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.02) 0%, transparent 50%);
            z-index: -2;
            pointer-events: none;
        }
        
        .noise-bg::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='1' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
            z-index: -1;
            pointer-events: none;
        }
        
        .gradient-orb {
            position: fixed;
            width: 600px;
            height: 600px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.03) 0%, rgba(255, 255, 255, 0) 70%);
            filter: blur(40px);
            z-index: -1;
            animation: floatOrb 20s infinite alternate ease-in-out;
            pointer-events: none;
        }
        
        .orb-1 {
            top: -300px;
            left: -300px;
        }
        
        .orb-2 {
            bottom: -300px;
            right: -300px;
            animation-delay: -10s;
        }
        
        @keyframes floatOrb {
            0% {
                transform: translate(0, 0) scale(1);
            }
            100% {
                transform: translate(50px, 50px) scale(1.1);
            }
        }
        
        .fact-card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 3rem 2.5rem;
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            min-height: 260px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            backdrop-filter: blur(10px);
            margin-top: -30px;
        }
        
        .fact-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.02) 0%, rgba(255, 255, 255, 0) 100%);
            pointer-events: none;
        }
        
        .fact-card:hover {
            transform: translateY(-8px);
            border-color: rgba(255, 255, 255, 0.15);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }
        
        .fact-text {
            font-size: 1.4rem;
            line-height: 1.7;
            font-weight: 400;
            text-align: center;
            color: var(--accent);
            margin-bottom: 2rem;
        }
        
        .fact-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
        }
        
        .fact-number {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--accent-dim);
            letter-spacing: 0.5px;
        }
        
        .fact-source {
            font-size: 0.75rem;
            color: var(--accent-dim);
            opacity: 0.7;
        }
        
        .action-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin: 2.5rem 0;
        }
        
        .action-btn {
            height: 64px;
            background: transparent;
            border: 1px solid var(--border);
            border-radius: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 6px;
            color: var(--accent);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
            position: relative;
            overflow: hidden;
        }
        
        .action-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.05), transparent);
            transition: left 0.6s;
        }
        
        .action-btn:hover::before {
            left: 100%;
        }
        
        .action-btn:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }
        
        .action-btn:active {
            transform: translateY(0);
        }
        
        .action-btn.active {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 255, 255, 0.2);
        }
        
        .action-icon {
            width: 20px;
            height: 20px;
            stroke: currentColor;
            transition: all 0.3s ease;
        }
        
        .action-label {
            font-size: 0.75rem;
            font-weight: 500;
            color: var(--accent-dim);
            transition: color 0.3s ease;
        }
        
        .nav-section {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .nav-btn {
            width: 52px;
            height: 52px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--tertiary);
            border: 1px solid var(--border);
            color: var(--accent);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.05);
            transform: scale(1.05);
            border-color: rgba(255, 255, 255, 0.15);
        }
        
        .nav-btn:active {
            transform: scale(0.95);
        }
        
        .nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            transform: none !important;
        }
        
        .nav-btn:disabled:hover {
            background: var(--tertiary);
            border-color: var(--border);
        }
        
        .progress-container {
            width: 200px;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: var(--accent);
            width: 0%;
            transition: width 0.4s ease;
        }
        
        .card-entrance {
            animation: cardEntrance 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }
        
        @keyframes cardEntrance {
            0% {
                opacity: 0;
                transform: translateY(40px) scale(0.95);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .like-animation {
            animation: likeBeat 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        @keyframes likeBeat {
            0% {
                transform: scale(1);
            }
            25% {
                transform: scale(1.2);
            }
            50% {
                transform: scale(0.95);
            }
            100% {
                transform: scale(1);
            }
        }
        
        .bookmark-animation {
            animation: bookmarkFold 0.5s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        @keyframes bookmarkFold {
            0% {
                transform: scale(1) rotate(0deg);
            }
            50% {
                transform: scale(1.1) rotate(5deg);
            }
            100% {
                transform: scale(1) rotate(0deg);
            }
        }
        
        .share-animation {
            animation: shareWiggle 0.7s ease;
        }
        
        @keyframes shareWiggle {
            0%, 100% {
                transform: rotate(0deg);
            }
            25% {
                transform: rotate(10deg);
            }
            75% {
                transform: rotate(-10deg);
            }
        }
        
        .copy-animation {
            animation: copyCheck 0.5s ease;
        }
        
        @keyframes copyCheck {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(0.8);
            }
            100% {
                transform: scale(1);
            }
        }
        
        .loading-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
        }
        
        .loading-dots {
            display: flex;
            gap: 8px;
        }
        
        .loading-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--accent);
            animation: loadingPulse 1.4s infinite ease-in-out;
        }
        
        .loading-dot:nth-child(1) { animation-delay: -0.32s; }
        .loading-dot:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes loadingPulse {
            0%, 80%, 100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
            40% {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        .logo {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #fff 0%, #a0a0a0 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
            letter-spacing: -0.5px;
        }
        
        .tagline {
            font-size: 1rem;
            color: var(--accent-dim);
            font-weight: 400;
            margin-bottom: 3rem;
        }
        
        .mobile-hint {
            display: none;
            text-align: center;
            font-size: 0.875rem;
            color: var(--accent-dim);
            margin-top: 1.5rem;
        }
        
        .card-highlight {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
        }
        
        .toast {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--tertiary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1rem 1.5rem;
            color: var(--accent);
            font-size: 0.875rem;
            font-weight: 500;
            z-index: 1000;
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
            backdrop-filter: blur(10px);
        }
        
        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }
        
        @media (max-width: 768px) {
            .fact-card {
                padding: 2.5rem 2rem;
                min-height: 250px; 
                margin: 0 1rem;
            }
            
            .fact-text {
                font-size: 1.25rem;
                line-height: 1.6;
            }
            
            .action-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.75rem;
                margin: 2rem 1rem;
            }
            
            .action-btn {
                height: 60px;
            }
            
            .nav-section {
                margin: 1.5rem 0;
            }
            
            .mobile-hint {
                display: block;
            }
            
            .logo {
                font-size: 2.25rem;
            }
            
            .tagline {
                font-size: 0.95rem;
                margin-bottom: 2.5rem;
            }
        }
        
        @media (max-width: 480px) {
            .fact-card {
                padding: 2rem 1.5rem;
                min-height: 300px;
                margin-top: -20px ;
            }
            
            .fact-text {
                font-size: 1.1rem;
            }
            
            .action-btn {
                height: 56px;
            }
        }
        
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
    </style>
</head>
<body>
    <!-- Background Elements -->
    <div class="noise-bg"></div>
    <div class="gradient-orb orb-1"></div>
    <div class="gradient-orb orb-2"></div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <div class="min-h-screen flex flex-col items-center justify-center p-4 py-8">
        <div class="text-center mb-8">
            <div class="logo">Factual</div>
            <div class="tagline">Curious facts for curious minds</div>
        </div>

        <div class="w-full max-w-3xl">
            <!-- Fact Card -->
            <div class="fact-card card-entrance" id="fact-card" role="article" aria-live="polite">
                <div class="card-highlight"></div>
                <div class="fact-text" id="fact-text">
                    <div class="loading-state">
                        <div class="loading-dots">
                            <div class="loading-dot"></div>
                            <div class="loading-dot"></div>
                            <div class="loading-dot"></div>
                        </div>
                        <div class="text-accent-dim">Loading fascinating facts...</div>
                    </div>
                </div>
                <div class="fact-meta">
                    <div class="fact-number" id="fact-number">Fact #1</div>
                    <div class="fact-source" id="fact-source">Source: Unknown</div>
                </div>
            </div>

            <!-- Action Grid -->
            <div class="action-grid">
                <button class="action-btn" id="like-btn" onclick="likeFact()" aria-label="Like fact">
                    <i data-lucide="heart" class="action-icon"></i>
                    <span class="action-label">Like</span>
                </button>
                <button class="action-btn" id="bookmark-btn" onclick="bookmarkFact()" aria-label="Save fact">
                    <i data-lucide="bookmark" class="action-icon"></i>
                    <span class="action-label">Save</span>
                </button>
                <button class="action-btn" id="share-btn" onclick="shareFact()" aria-label="Share fact">
                    <i data-lucide="share-2" class="action-icon"></i>
                    <span class="action-label">Share</span>
                </button>
                <button class="action-btn" id="copy-btn" onclick="copyFact()" aria-label="Copy fact">
                    <i data-lucide="copy" class="action-icon"></i>
                    <span class="action-label">Copy</span>
                </button>
            </div>

            <!-- Navigation -->
            <div class="nav-section">
                <button class="nav-btn" id="prev-btn" onclick="previousFact()" aria-label="Previous fact">
                    <i data-lucide="chevron-left"></i>
                </button>
                
                <div class="progress-container">
                    <div class="progress-bar" id="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                
                <button class="nav-btn" id="next-btn" onclick="nextFact()" aria-label="Next fact">
                    <i data-lucide="chevron-right"></i>
                </button>
            </div>

            <div class="mobile-hint">
                <i data-lucide="move-horizontal" class="inline w-4 h-4 mr-2"></i>
                Swipe or use arrow keys to navigate
            </div>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();
        
        // State management
        let facts = [];
        let currentFactIndex = 0;
        let likedFacts = new Set();
        let bookmarkedFacts = new Set();
        let isLoading = false;
        
        // DOM elements
        const factCard = document.getElementById('fact-card');
        const factText = document.getElementById('fact-text');
        const factNumber = document.getElementById('fact-number');
        const factSource = document.getElementById('fact-source');
        const progressBar = document.getElementById('progress-bar');
        const likeBtn = document.getElementById('like-btn');
        const bookmarkBtn = document.getElementById('bookmark-btn');
        const shareBtn = document.getElementById('share-btn');
        const copyBtn = document.getElementById('copy-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const toast = document.getElementById('toast');
        
        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            loadFacts();
            setupEventListeners();
            updateAccessibility();
        });
        
        // Set up event listeners
        function setupEventListeners() {
            // Keyboard navigation
            document.addEventListener('keydown', function(e) {
                if (e.key === 'ArrowLeft') {
                    previousFact();
                } else if (e.key === 'ArrowRight' || e.key === ' ') {
                    nextFact();
                }
            });
            
            // Swipe support for mobile
            let touchStartX = 0;
            let touchEndX = 0;
            
            factCard.addEventListener('touchstart', function(e) {
                touchStartX = e.changedTouches[0].screenX;
            }, { passive: true });
            
            factCard.addEventListener('touchend', function(e) {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            }, { passive: true });
            
            function handleSwipe() {
                const swipeThreshold = 50;
                
                if (touchEndX < touchStartX - swipeThreshold) {
                    nextFact();
                } else if (touchEndX > touchStartX + swipeThreshold) {
                    previousFact();
                }
            }
            
            // Prevent context menu on long press
            factCard.addEventListener('contextmenu', function(e) {
                e.preventDefault();
            });
        }
        
        // Show toast notification
        function showToast(message, duration = 3000) {
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, duration);
        }
        
        // Load facts from API
        async function loadFacts() {
            if (isLoading) return;
            
            isLoading = true;
            try {
                // Load initial facts
                const promises = [];
                for (let i = 0; i < 8; i++) {
                    promises.push(fetchRandomFact());
                }
                
                await Promise.all(promises);
                updateDisplay();
            } catch (error) {
                console.error('Error loading facts:', error);
                showToast('Failed to load facts. Please check your connection.');
                factText.innerHTML = '<div class="text-accent-dim">Unable to load facts. Please try again later.</div>';
            } finally {
                isLoading = false;
            }
        }
        
        // Fetch a random fact from the API
        async function fetchRandomFact() {
            try {
                const response = await fetch('https://uselessfacts.jsph.pl/api/v2/facts/random?language=en');
                if (!response.ok) throw new Error('Network response was not ok');
                
                const data = await response.json();
                
                if (data.text && !facts.some(f => f.id === data.id)) {
                    facts.push({
                        id: data.id,
                        text: data.text,
                        source: data.source || 'Unknown'
                    });
                }
            } catch (error) {
                console.error('Error fetching fact:', error);
                
                // Fallback facts in case API fails
                const fallbackFacts = [
                    "Honey never spoils. Archaeologists have found pots of honey in ancient Egyptian tombs that are over 3,000 years old and still perfectly good to eat.",
                    "Octopuses have three hearts. Two pump blood through the gills, while the third pumps it through the rest of the body.",
                    "The shortest war in history was between Britain and Zanzibar in 1896. Zanzibar surrendered after 38 minutes.",
                    "A group of flamingos is called a 'flamboyance'.",
                    "Bananas are berries, but strawberries aren't.",
                    "The unicorn is the national animal of Scotland.",
                    "A day on Venus is longer than a year on Venus.",
                    "The first computer mouse was made of wood.",
                    "There are more possible iterations of a game of chess than there are atoms in the known universe.",
                    "A jiffy is an actual unit of time: 1/100th of a second."
                ];
                
                if (facts.length < 8) {
                    const randomIndex = Math.floor(Math.random() * fallbackFacts.length);
                    facts.push({
                        id: 'fallback-' + Date.now() + Math.random(),
                        text: fallbackFacts[randomIndex],
                        source: 'Factual'
                    });
                }
            }
        }
        
        // Update the display with current fact
        function updateDisplay() {
            if (facts.length === 0) return;
            
            // Update fact content
            factText.textContent = facts[currentFactIndex].text;
            factNumber.textContent = `Fact #${currentFactIndex + 1}`;
            factSource.textContent = `Source: ${facts[currentFactIndex].source}`;
            
            // Update progress bar
            const progress = ((currentFactIndex + 1) / facts.length) * 100;
            progressBar.style.width = `${progress}%`;
            progressBar.setAttribute('aria-valuenow', Math.round(progress));
            
            // Update navigation buttons
            prevBtn.disabled = currentFactIndex === 0;
            nextBtn.disabled = facts.length === 0;
            
            // Update action buttons state
            updateButtonStates();
            
            // Add entrance animation
            factCard.classList.remove('card-entrance');
            void factCard.offsetWidth; // Trigger reflow
            factCard.classList.add('card-entrance');
            
            // Update accessibility
            updateAccessibility();
        }
        
        // Update accessibility attributes
        function updateAccessibility() {
            factCard.setAttribute('aria-label', `Fact ${currentFactIndex + 1} of ${facts.length}: ${facts[currentFactIndex]?.text || 'Loading'}`);
        }
        
        // Go to the next fact
        function nextFact() {
            if (facts.length === 0 || nextBtn.disabled) return;
            
            currentFactIndex = (currentFactIndex + 1) % facts.length;
            updateDisplay();
            
            // If we're near the end, load more facts
            if (currentFactIndex >= facts.length - 2 && !isLoading) {
                fetchRandomFact();
            }
        }
        
        // Go to the previous fact
        function previousFact() {
            if (currentFactIndex === 0 || prevBtn.disabled) return;
            
            currentFactIndex--;
            updateDisplay();
        }
        
        // Update button states
        function updateButtonStates() {
            const currentFactId = facts[currentFactIndex].id;
            
            // Like button
            if (likedFacts.has(currentFactId)) {
                likeBtn.classList.add('active');
                likeBtn.innerHTML = '<i data-lucide="heart" class="action-icon" fill="currentColor"></i><span class="action-label">Liked</span>';
                likeBtn.setAttribute('aria-label', 'Unlike fact');
            } else {
                likeBtn.classList.remove('active');
                likeBtn.innerHTML = '<i data-lucide="heart" class="action-icon"></i><span class="action-label">Like</span>';
                likeBtn.setAttribute('aria-label', 'Like fact');
            }
            
            // Bookmark button
            if (bookmarkedFacts.has(currentFactId)) {
                bookmarkBtn.classList.add('active');
                bookmarkBtn.innerHTML = '<i data-lucide="bookmark" class="action-icon" fill="currentColor"></i><span class="action-label">Saved</span>';
                bookmarkBtn.setAttribute('aria-label', 'Remove from saved');
            } else {
                bookmarkBtn.classList.remove('active');
                bookmarkBtn.innerHTML = '<i data-lucide="bookmark" class="action-icon"></i><span class="action-label">Save</span>';
                bookmarkBtn.setAttribute('aria-label', 'Save fact');
            }
            
            // Re-initialize icons
            lucide.createIcons();
        }
        
        // Like/unlike the current fact
        function likeFact() {
            const currentFactId = facts[currentFactIndex].id;
            
            if (likedFacts.has(currentFactId)) {
                likedFacts.delete(currentFactId);
                showToast('Removed from liked facts');
            } else {
                likedFacts.add(currentFactId);
                showToast('Added to liked facts');
                
                // Add animation effect
                likeBtn.classList.add('like-animation');
                setTimeout(() => {
                    likeBtn.classList.remove('like-animation');
                }, 600);
            }
            
            updateButtonStates();
        }
        
        // Bookmark/unbookmark the current fact
        function bookmarkFact() {
            const currentFactId = facts[currentFactIndex].id;
            
            if (bookmarkedFacts.has(currentFactId)) {
                bookmarkedFacts.delete(currentFactId);
                showToast('Removed from saved facts');
            } else {
                bookmarkedFacts.add(currentFactId);
                showToast('Added to saved facts');
                
                // Add animation
                bookmarkBtn.classList.add('bookmark-animation');
                setTimeout(() => {
                    bookmarkBtn.classList.remove('bookmark-animation');
                }, 500);
            }
            
            updateButtonStates();
        }
        
        // Share the current fact
        async function shareFact() {
            const fact = facts[currentFactIndex].text;
            
            // Add animation
            shareBtn.classList.add('share-animation');
            setTimeout(() => {
                shareBtn.classList.remove('share-animation');
            }, 700);
            
            if (navigator.share) {
                try {
                    await navigator.share({
                        title: 'Factual - Interesting Fact',
                        text: fact,
                        url: window.location.href
                    });
                    showToast('Fact shared successfully');
                } catch (error) {
                    if (error.name !== 'AbortError') {
                        copyToClipboard(fact);
                    }
                }
            } else {
                copyToClipboard(fact);
            }
        }
        
        // Copy the current fact to clipboard
        function copyFact() {
            const fact = facts[currentFactIndex].text;
            copyToClipboard(fact);
        }
        
        // Helper function to copy text to clipboard
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showToast('Fact copied to clipboard');
                
                // Visual feedback
                copyBtn.classList.add('copy-animation');
                copyBtn.innerHTML = '<i data-lucide="check" class="action-icon"></i><span class="action-label">Copied</span>';
                
                setTimeout(() => {
                    copyBtn.classList.remove('copy-animation');
                    copyBtn.innerHTML = '<i data-lucide="copy" class="action-icon"></i><span class="action-label">Copy</span>';
                    lucide.createIcons();
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy fact: ', err);
                showToast('Failed to copy fact');
                
                // Fallback method
                const textArea = document.createElement('textarea');
                textArea.value = text;
                textArea.style.position = 'fixed';
                textArea.style.opacity = '0';
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
            });
        }
        
        // Error handling for failed API calls
        window.addEventListener('error', function(e) {
            console.error('Global error:', e.error);
            showToast('Something went wrong. Please refresh the page.');
        });
        
        // Handle offline/online status
        window.addEventListener('online', function() {
            showToast('Connection restored');
            if (facts.length === 0) {
                loadFacts();
            }
        });
        
        window.addEventListener('offline', function() {
            showToast('You are currently offline');
        });
        
// Add this script to make the custom cursor functional
document.addEventListener('DOMContentLoaded', function() {
    // Create custom cursor elements
    const cursor = document.createElement('div');
    cursor.className = 'custom-cursor';
    cursor.innerHTML = `
        <div class="cursor-outer"></div>
        <div class="cursor-inner"></div>
    `;
    document.body.appendChild(cursor);

    // Cursor movement
    document.addEventListener('mousemove', (e) => {
        cursor.style.left = e.clientX + 'px';
        cursor.style.top = e.clientY + 'px';
    });

    // Hover effects
    const hoverElements = document.querySelectorAll('button, a, [role="button"], .action-btn, .nav-btn');
    
    hoverElements.forEach(el => {
        el.addEventListener('mouseenter', () => {
            cursor.classList.add('hover');
        });
        el.addEventListener('mouseleave', () => {
            cursor.classList.remove('hover');
        });
    });

    // Click effect
    document.addEventListener('mousedown', () => {
        cursor.classList.add('click');
    });
    
    document.addEventListener('mouseup', () => {
        cursor.classList.remove('click');
    });

    // Hide cursor when leaving window
    document.addEventListener('mouseleave', () => {
        cursor.style.opacity = '0';
    });
    
    document.addEventListener('mouseenter', () => {
        cursor.style.opacity = '1';
    });
});
    </script>
</body>
</html>